!function(a){a.extend(a.ui,{multiDatesPicker:{version:"1.6.3"}}),a.fn.multiDatesPicker=function(b){function h(a,b){b||(b="picked"),a=l.call(this,a);for(var c=0;c<this.multiDatesPicker.dates[b].length;c++)if(!m.compareDates(this.multiDatesPicker.dates[b][c],a))return this.multiDatesPicker.dates[b].splice(c,1).pop()}function i(a,b){return b||(b="picked"),this.multiDatesPicker.dates[b].splice(a,1).pop()}function j(a,b,c){b||(b="picked"),a=l.call(this,a),a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),!1===m.gotDate.call(this,a,b)&&(this.multiDatesPicker.dates[b].push(a),c||this.multiDatesPicker.dates[b].sort(m.compareDates))}function k(a){a||(a="picked"),this.multiDatesPicker.dates[a].sort(m.compareDates)}function l(a,b,c){return b||(b="object"),m.dateConvert.call(this,a,b,c)}var c=arguments,d=this,g=(new Date,new Date(0),{}),m={init:function(b){var c=a(this);this.multiDatesPicker.changed=!1;var d={beforeShow:function(a,b){this.multiDatesPicker.changed=!1,this.multiDatesPicker.originalBeforeShow&&this.multiDatesPicker.originalBeforeShow.call(this,a,b)},onSelect:function(b,c){var d=a(this);if(this.multiDatesPicker.changed=!0,b&&(d.multiDatesPicker("toggleDate",b),this.multiDatesPicker.changed=!0),"normal"==this.multiDatesPicker.mode&&this.multiDatesPicker.pickableRange)if(this.multiDatesPicker.dates.picked.length>0){var e=this.multiDatesPicker.dates.picked[0],f=new Date(e.getTime());if(m.sumDays(f,this.multiDatesPicker.pickableRange-1),this.multiDatesPicker.adjustRangeToDisabled){var g,h=this.multiDatesPicker.dates.disabled.slice(0);do{g=0;for(var i=0;i<h.length;i++)h[i].getTime()<=f.getTime()&&(e.getTime()<=h[i].getTime()&&h[i].getTime()<=f.getTime()&&g++,h.splice(i,1),i--);f.setDate(f.getDate()+g)}while(0!=g)}this.multiDatesPicker.maxDate&&f>this.multiDatesPicker.maxDate&&(f=this.multiDatesPicker.maxDate),d.datepicker("option","minDate",e).datepicker("option","maxDate",f)}else d.datepicker("option","minDate",this.multiDatesPicker.minDate).datepicker("option","maxDate",this.multiDatesPicker.maxDate);this.multiDatesPicker.originalOnSelect&&b&&this.multiDatesPicker.originalOnSelect.call(this,b,c)},beforeShowDay:function(b){var c=a(this),d=!1!==c.multiDatesPicker("gotDate",b),e=c.datepicker("option","disabled"),f=!1!==c.multiDatesPicker("gotDate",b,"disabled"),g=this.multiDatesPicker.maxPicks<=this.multiDatesPicker.dates.picked.length,h=[!0,"",null];return this.multiDatesPicker.originalBeforeShowDay&&(h=this.multiDatesPicker.originalBeforeShowDay.call(this,b)),h[1]=d?"ui-state-highlight":h[1],h[0]=h[0]&&!(e||f||g&&!h[1]),h}};if(c.val())var e=c.val();this.multiDatesPicker.separator=", ",b?(b.separator&&(this.multiDatesPicker.separator=b.separator),this.multiDatesPicker.originalBeforeShow=b.beforeShow,this.multiDatesPicker.originalOnSelect=b.onSelect,this.multiDatesPicker.originalBeforeShowDay=b.beforeShowDay,this.multiDatesPicker.originalOnClose=b.onClose,c.datepicker(b),this.multiDatesPicker.minDate=a.datepicker._determineDate(this,b.minDate,null),this.multiDatesPicker.maxDate=a.datepicker._determineDate(this,b.maxDate,null),b.addDates&&m.addDates.call(this,b.addDates),b.addDisabledDates&&m.addDates.call(this,b.addDisabledDates,"disabled"),m.setMode.call(this,b)):c.datepicker(),c.datepicker("option",d),e&&c.multiDatesPicker("value",e);var f=c.multiDatesPicker("value");"INPUT"==this.tagName&&c.val(f);var g=c.datepicker("option","altField");g&&a(g).val(f),c.datepicker("refresh")},compareDates:function(a,b){a=l.call(this,a),b=l.call(this,b);var c=a.getFullYear()-b.getFullYear();return c||(c=a.getMonth()-b.getMonth())||(c=a.getDate()-b.getDate()),c},sumDays:function(a,b){var c=typeof a;return obj_date=l.call(this,a),obj_date.setDate(obj_date.getDate()+b),l.call(this,obj_date,c)},dateConvert:function(b,c,d){var e=typeof b;if(e==c){if("object"==e)try{b.getTime()}catch(b){return a.error("Received date is in a non supported format!"),!1}return b}var f=a(this);if(void 0===b&&(b=new Date(0)),"string"!=c&&"object"!=c&&"number"!=c&&a.error('Date format "'+c+'" not supported!'),!d){d=a.datepicker._defaults.dateFormat;var g=f.datepicker("option","dateFormat");g&&(d=g)}switch(e){case"object":break;case"string":b=a.datepicker.parseDate(d,b);break;case"number":b=new Date(b);break;default:a.error('Conversion from "'+c+'" format not allowed on jQuery.multiDatesPicker')}switch(c){case"object":return b;case"string":return a.datepicker.formatDate(d,b);case"number":return b.getTime();default:a.error('Conversion to "'+c+'" format not allowed on jQuery.multiDatesPicker')}return!1},gotDate:function(a,b){b||(b="picked");for(var c=0;c<this.multiDatesPicker.dates[b].length;c++)if(0===m.compareDates.call(this,this.multiDatesPicker.dates[b][c],a))return c;return!1},value:function(a){if(!a||"string"!=typeof a){var b=m.getDates.call(this,"string");return b.length?b.join(this.multiDatesPicker.separator):""}m.addDates.call(this,a.split(this.multiDatesPicker.separator))},getDates:function(b,c){switch(b||(b="string"),c||(c="picked"),b){case"object":return this.multiDatesPicker.dates[c];case"string":case"number":var d=new Array;for(var e in this.multiDatesPicker.dates[c])d.push(l.call(this,this.multiDatesPicker.dates[c][e],b));return d;default:a.error('Format "'+b+'" not supported!')}},addDates:function(b,c){if(b.length>0)switch(c||(c="picked"),typeof b){case"object":case"array":if(b.length){for(var d=0;d<b.length;d++)j.call(this,b[d],c,!0);k.call(this,c);break}case"string":case"number":j.call(this,b,c);break;default:a.error('Date format "'+typeof b+'" not allowed on jQuery.multiDatesPicker')}else a.error("Empty array of dates received.")},removeDates:function(a,b){b||(b="picked");var c=[];if("[object Array]"===Object.prototype.toString.call(a))for(var d in a.sort(function(a,b){return b-a}))c.push(h.call(this,a[d],b));else c.push(h.call(this,a,b));return c},removeIndexes:function(a,b){b||(b="picked");var c=[];if("[object Array]"===Object.prototype.toString.call(a))for(var d in a.sort(function(a,b){return b-a}))c.push(i.call(this,a[d],b));else c.push(i.call(this,a,b));return c},resetDates:function(a){a||(a="picked"),this.multiDatesPicker.dates[a]=[]},toggleDate:function(a,b){switch(b||(b="picked"),this.multiDatesPicker.mode){case"daysRange":this.multiDatesPicker.dates[b]=[];var c=this.multiDatesPicker.autoselectRange[1],d=this.multiDatesPicker.autoselectRange[0];c<d&&(c=this.multiDatesPicker.autoselectRange[0],d=this.multiDatesPicker.autoselectRange[1]);for(var e=d;e<c;e++)m.addDates.call(this,m.sumDays(a,e),b);break;default:!1===m.gotDate.call(this,a)?m.addDates.call(this,a,b):m.removeDates.call(this,a,b)}},setMode:function(b){a(this);switch(b.mode&&(this.multiDatesPicker.mode=b.mode),this.multiDatesPicker.mode){case"normal":for(option in b)switch(option){case"maxPicks":case"minPicks":case"pickableRange":case"adjustRangeToDisabled":this.multiDatesPicker[option]=b[option]}break;case"daysRange":case"weeksRange":var d=1;for(option in b)switch(option){case"autoselectRange":d--;case"pickableRange":case"adjustRangeToDisabled":this.multiDatesPicker[option]=b[option]}d>0&&a.error("Some mandatory options not specified!")}g.onSelect&&g.onSelect()},destroy:function(){this.multiDatesPicker=null,a(this).datepicker("destroy")}};return this.each(function(){var e=a(this);if(this.multiDatesPicker||(this.multiDatesPicker={dates:{picked:[],disabled:[]},mode:"normal",adjustRangeToDisabled:!0}),m[b]){var f=m[b].apply(this,Array.prototype.slice.call(c,1));switch(b){case"removeDates":case"removeIndexes":case"resetDates":case"toggleDate":case"addDates":var g=e.datepicker("option","altField"),h=m.value.call(this);void 0!==g&&""!=g&&a(g).val(h),"INPUT"==this.tagName&&e.val(h),a.datepicker._refreshDatepicker(this)}switch(b){case"removeDates":case"getDates":case"gotDate":case"sumDays":case"compareDates":case"dateConvert":case"value":d=f}return f}return"object"!=typeof b&&b?(a.error("Method "+b+" does not exist on jQuery.multiDatesPicker"),!1):m.init.apply(this,c)}),d};var c=(new Date).getTime();a.multiDatesPicker={version:!1},a.multiDatesPicker.initialized=!1,a.multiDatesPicker.uuid=(new Date).getTime(),a.multiDatesPicker.version=a.ui.multiDatesPicker.version,a.multiDatesPicker._hideDatepicker=a.datepicker._hideDatepicker,a.datepicker._hideDatepicker=function(){var b=this._curInst.input[0],c=b.multiDatesPicker;return!c||!1===this._curInst.inline&&!c.changed?a.multiDatesPicker._hideDatepicker.apply(this,arguments):(c.changed=!1,void a.datepicker._refreshDatepicker(b))},window["DP_jQuery_"+c]=a}(jQuery);